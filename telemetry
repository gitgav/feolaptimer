int sensorVal;
bool started = false;
unsigned int lapstart, lapend, laptime;
int lapNum = 0;
int delaySensor = 0;

void setup() {
  // put your setup code here, to run once:
  Serial.begin(115200);

  
}

void loop() {
  // put your main code here, to run repeatedly:
  sensorVal = analogRead(A0);
  
  if (sensorVal > 50 && millis() - delaySensor > 2000){
    delaySensor = millis();
    if (started){
      endLap();
    }

    if (!started){
      startLap();
    }
  }
}

void startLap(){
  lapstart = millis();
  lapNum += 1;
  started = true;
}

void endLap(){
  lapend = millis();
  laptime = lapend - lapstart;

  int s = int(laptime / 1000);
  int ms = laptime - s * 1000;

  Serial.print("Lap ");
  Serial.print(lapNum);
  Serial.print(": ");
  Serial.print(s);
  Serial.print(".");
  Serial.print(ms);
  Serial.println();

  started = false;
}
